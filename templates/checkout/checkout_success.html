{% extends "base.html" %}

{% load static %}

{% block title %}Checkout Success{% endblock %}

{% block content %}

<div class="mx-8 md:mx-0 lg:mx-12 my-10  ">
  <div class='md:flex md:space-x-4'>
      <!-- Checkout Success Message -->
    <div class='md:w-1/2' >  
        <h1 class="text-3xl pb-8 mb-4  font-bold">Thank you!</h1>
        <p class="mt-2 mb-12 text-lg">Your order information is below. A confirmation email will be sent to <strong> {{ order.email}}.</strong></p>    
    </div>
    <!-- Order Summary Table-->
    <div class='md:w-1/2  lg:mr-16 ' >
      <h2 class='sr-only '>Order Summary</h2>
      <!-- Order Number-->
      <h3 class='mb-4 text-sm font-semibold  text-gray-800'> Your order  : </h3>
      <div class="mb-8 relative overflow-x-auto shadow-md sm:rounded-lg">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        Order Number
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{ order.order_number }}
                    </td>
                </tr>
            </tbody>
        </table>
      </div>
      <div class="mb-8 relative overflow-x-auto shadow-md sm:rounded-lg">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        Order Date
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{ order.date }}
                    </td>
                </tr>
            </tbody>
        </table>
      </div>
      <!-- Order Details-->
      <h3 class='mb-4 text-sm font-semibold  text-gray-800 sr-only'>Order Details: </h3>
      <div class="mb-8 relative overflow-x-auto shadow-md sm:rounded-lg">
          <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                  <tr>
                      <th scope="col" class="px-6 py-3">
                          Product name
                      </th>
                      <th scope="col" class="px-6 py-3">
                          Qty @ Price
                      </th>
                  </tr>
              </thead>
              <tbody>
                 {% for item in order.lineitems.all %}
                  <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                      <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                          {{ item.product.name }} {% if item.product_size %} - Size {{item.product_size|upper }} {% endif%}
                      </th>
                      <td class="px-6 py-4">
                        {{ item.quantity}} @ £{{ item.product.price }}
                      </td>
                  </tr>
                  {% endfor%}
              </tbody>
          </table>
      </div>
      <!--  Delivery Address-->
      <div class="mb-8 relative overflow-x-auto shadow-md sm:rounded-lg">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        Delivery Address
                    </th>
                    <th scope="col" class="px-6 py-3">
                        
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="bg-white  dark:bg-gray-800 ">
                    <td scope="row" class="px-6  font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Full Name
                    </td>
                    <td class="px-6 py-1">
                      {{ order.full_name}}
                    </td>
                </tr>
                <tr class="bg-white  ">
                    <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Street Address 1
                    </td>
                    <td class="px-6 py-1">
                      {{ order.street_address1}}
                    </td>
                </tr>
                <tr class="bg-white  ">
                    <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        Street Address 2
                    </td>
                    <td class="px-6 py-1">
                      {{ order.street_address2}}
                    </td>
                </tr>
                <tr class="bg-white  ">
                  <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                      Town / City
                  </td>
                  <td class="px-6 py-1">
                    {{ order.town_or_city}}
                  </td>
              </tr>
              <tr class="bg-white  ">
                <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                    Postcode
                </td>
                <td class="px-6 py-1">
                  {{ order.postcode}}
                </td>
            </tr>
            <tr class="bg-white  ">
              <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                  Country
              </td>
              <td class="px-6 py-1">
                {{ order.country}}
              </td>
            </tr>
            <tr class="bg-white  ">
              <td scope="row" class="px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                  Phone
              </td>
              <td class="px-6 py-1">
                {{ order.phone_number}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Summary of the Order -->
      <div class="mb-16 mt-8 mr-5 left-3 leading-10 flex flex-col place-items-end">
        <p class=" leading-6 mr-5 font-semibold tracking-tight text-gray-900 dark:text-white">Order Total :  £ <span class='text-md'> {{ order.grand_total|floatformat:2}} </span> </p>
        <p class=" leading-6 mr-5 font-semibold tracking-tight text-gray-900 dark:text-white">Delivery :  £ <span class='text-md'> {{ order.delivery_cost|floatformat:2}} </span> </p>
        <p class=" leading-6 mr-5 font-semibold tracking-tight text-gray-900 dark:text-white">Grand Total :  £ <span class='text-md'> {{ order.grand_total|floatformat:2}} </span> </p>
      </div>
    </div>
  </div>
</div>


 
{% endblock %}


{% block javascript %}

{{ stripe_public_key|json_script:'id_stripe_public_key' }}
{{ client_secret|json_script:'id_client_secret' }}
<script src=" {%  static 'js/stripe_elements.js' %}" ></script>

{% endblock javascript  %}
